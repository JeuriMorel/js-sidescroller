import{Boom as s,Boom_V2 as t,Smoke as i}from"./particles.js";export const STATES={RETREAT:0,ATTACK:1,IDLE:2,JUMP_DOWN:3,JUMP_FORWARD:4,GOT_HIT:5,DEFEATED:6};class h{constructor(s){this.state=s}}export class Attack extends h{constructor(s){super("ATTACK"),this.boss=s,this.spriteWidth=304.5,this.spriteHeight=196,this.width=this.spriteWidth*this.boss.sizeModifier*2,this.height=this.spriteHeight*this.boss.sizeModifier*2}enter(){this.boss.frame=0,this.boss.resetBoxes(),this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=30,this.boss.image=this.boss.sprite_sheets.attack,this.boss.horizontalSpeed=0,this.boss.x-=this.boss.attackOffsetX,this.boss.hurtbox.body.xOffset+=this.boss.attackOffsetX,this.boss.hitbox.body.xOffset+=this.boss.attackOffsetX,this.boss.hurtbox.tongue.xOffset+=this.boss.attackOffsetX,this.boss.hitbox.tongue.xOffset+=this.boss.attackOffsetX,this.boss.hitbox.claws.xOffset+=this.boss.attackOffsetX,this.boss.hurtbox.tongue.isActive=!0,this.boss.hitbox.tongue.isActive=!0,this.boss.hitbox.claws.isActive=!0,this.boss.velocityY=0,this.boss.y=this.boss.game.height-this.boss.height*this.boss.spriteGroundOffsetModifier-this.boss.game.groundMargin}update(){this.boss.x-=this.boss.game.scrollSpeed,this.boss.isFirstRefreshOnCurrentFrame()&&(14===this.boss.frame?(this.boss.hurtbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX-75,this.boss.audio.tongue.play(),this.boss.hitbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX-75):15===this.boss.frame?(this.boss.hurtbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX-145,this.boss.hitbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX-145):17===this.boss.frame?(this.boss.hurtbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX-80,this.boss.hitbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX):18===this.boss.frame&&(this.boss.hurtbox.tongue.xOffset=this.boss.width*this.boss.idleXOffsetModifier*this.boss.sizeModifier+this.boss.attackOffsetX)),this.boss.lastFinishedFrame=this.boss.frame,this.boss.frame===this.boss.maxFrame&&(this.boss.exitTongueAttack(),this.boss.setState(STATES.IDLE))}}export class Retreat extends h{constructor(s){super("RETREAT"),this.boss=s,this.spriteWidth=467,this.spriteHeight=393,this.width=this.spriteWidth*this.boss.sizeModifier,this.height=this.spriteHeight*this.boss.sizeModifier}enter(){this.boss.frame=0,this.boss.horizontalSpeed=3,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=22,this.boss.image=this.boss.sprite_sheets.retreat,this.boss.resetBoxes(),this.boss.audio.retreat.play()}update(){this.boss.x+=this.boss.game.scrollSpeed+this.boss.horizontalSpeed,this.boss.x>=this.boss.game.width-this.boss.width&&this.boss.setState(STATES.IDLE)}}export class Idle extends h{constructor(s){super("IDLE"),this.boss=s,this.spriteWidth=446,this.spriteHeight=393,this.width=this.spriteWidth*this.boss.sizeModifier,this.height=this.spriteHeight*this.boss.sizeModifier}enter(){this.boss.frame=0,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=30,this.boss.image=this.boss.sprite_sheets.idle,this.boss.horizontalSpeed=0,this.boss.resetBoxes()}update(){this.boss.x-=this.boss.game.scrollSpeed,this.boss.x<=.4*this.boss.game.width&&this.boss.setState(STATES.RETREAT)}}export class Jump_Down extends h{constructor(s){super("JUMP_DOWN"),this.boss=s,this.spriteWidth=647,this.spriteHeight=432,this.width=this.spriteWidth*this.boss.sizeModifier,this.height=this.spriteHeight*this.boss.sizeModifier,this.claws={width:.6*this.boss.width*this.boss.sizeModifier,yOffset:1.75*this.boss.height*this.boss.sizeModifier}}enter(){this.boss.frame=0,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=20,this.boss.image=this.boss.sprite_sheets.jump_down,this.boss.resetBoxes(),this.boss.hitbox&&(this.boss.hitbox.claws.width=this.claws.width,this.boss.hitbox.claws.yOffset=this.claws.yOffset)}update(){this.boss.isOnGround()&&(this.boss.audio.land.play(),this.boss.setState(STATES.IDLE),this.boss.game.particles.push(new i({game:this.boss.game,x:this.boss.x,y:this.boss.game.height-this.boss.game.groundMargin,sizeModifier:1,src:null})),this.boss.game.particles.push(new i({game:this.boss.game,x:this.boss.x+.7*this.boss.width,y:this.boss.game.height-this.boss.game.groundMargin,sizeModifier:1.2,src:null})),this.boss.game.particles.push(new i({game:this.boss.game,x:this.boss.x+.9*this.boss.width,y:this.boss.game.height-this.boss.game.groundMargin,sizeModifier:.5,src:null})),this.boss.game.particles.push(new i({game:this.boss.game,x:this.boss.x+.2*this.boss.width,y:this.boss.game.height-this.boss.game.groundMargin,sizeModifier:.3,src:null})))}}export class Jump_Forward extends h{constructor(s){super("JUMP_FORWARD"),this.boss=s,this.spriteWidth=707,this.spriteHeight=491,this.width=this.spriteWidth*this.boss.sizeModifier,this.height=this.spriteHeight*this.boss.sizeModifier}enter(){this.boss.frame=0,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=20,this.boss.image=this.boss.sprite_sheets.jump_forward,this.boss.velocityY-=55,this.boss.jumpTarget=this.boss.game.player.x<this.boss.x&&this.boss.game.player.currentState!==this.boss.game.player.states[3]?this.boss.game.player.x:this.boss.game.width-this.boss.width,this.boss.hitbox.claws.width*=1.5,this.boss.audio.jump.play(),this.boss.game.particles.push(new s({game:this.boss.game,x:this.boss.x+.5*this.boss.width,y:this.boss.game.height-this.boss.game.groundMargin,sizeModifier:2,src:null}))}update(){this.boss.velocityY>0&&this.boss.setState(STATES.JUMP_DOWN)}}export class Got_Hit extends h{constructor(s){super("GOT_HIT"),this.boss=s,this.spriteWidth=494,this.spriteHeight=393,this.width=this.spriteWidth*this.boss.sizeModifier,this.height=this.spriteHeight*this.boss.sizeModifier}enter(){this.boss.frame=0,this.boss.horizontalSpeed=35,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=16,this.boss.image=this.boss.sprite_sheets.got_hit,this.boss.hurtbox.body.isActive=!1,this.boss.hurtbox.tongue.isActive=!1,this.boss.hitbox.tongue.isActive=!1,this.boss.audio.damaged.play()}update(){this.boss.x+=this.boss.horizontalSpeed+this.boss.game.scrollSpeed,this.boss.x>this.boss.game.width-this.boss.width&&(this.boss.x=this.boss.game.width-this.boss.width),this.boss.frame===this.boss.maxFrame&&(this.boss.hurtbox.body.isActive=!0,this.boss.hurtbox.tongue.isActive=!0,this.boss.setState(STATES.RETREAT))}}export class Defeated extends h{constructor(s){super("DEFEATED"),this.boss=s,this.spriteWidth=261,this.spriteHeight=237.5,this.width=this.spriteWidth*this.boss.sizeModifier*2,this.height=this.spriteHeight*this.boss.sizeModifier*2}enter(){this.boss.frame=0,this.boss.horizontalSpeed=0,this.boss.spriteWidth=this.spriteWidth,this.boss.spriteHeight=this.spriteHeight,this.boss.width=this.width,this.boss.height=this.height,this.boss.maxFrame=50,this.boss.image=this.boss.sprite_sheets.defeated,this.boss.hurtbox.body.isActive=!1,this.boss.hurtbox.tongue.isActive=!1,this.boss.hitbox.body.isActive=!1,this.boss.hitbox.tongue.isActive=!1,this.boss.hitbox.claws.isActive=!1,this.boss.isDefeated=!0,this.boss.game.music.currentTheme.pause(),this.boss.audio.growl.play(),this.boss.game.player.fps=15,this.boss.game.player.frameInterval=1e3/this.boss.game.player.fps,this.boss.game.player.stickyMultiplier=0}update(){this.boss.x-=this.boss.horizontalSpeed+this.boss.game.scrollSpeed,this.boss.frame===this.boss.maxFrame&&(this.boss.deleteEnemy=!0,this.boss.audio.dematerialize.play(),this.boss.game.particles.push(new t({game:this.boss.game,x:this.boss.x+.65*this.boss.width,y:this.boss.game.height-this.boss.game.groundMargin-.25*this.boss.height,sizeModifier:3})),this.boss.game.currentWave.exit())}}