import{qs as i}from"./utils.js";const t={duration:250,easing:"cubic-bezier(.43,1.59,1,1.26)"};export class Accordian{constructor(t){this.element=t,this.summary=i("summary",t),this.content=i(".menu",t),this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.summary,addEventListener("click",(i=>this.onClick(i)))}onClick(i){i.target==this.summary&&(i.preventDefault(),this.element.style.overflow="hidden",this.isClosing||!this.element.open?this.open():(this.isExpanding||this.element.open)&&this.shrink())}shrink(){this.closing=!0;const i=`${this.element.offsetHeight}px`,n=`${this.summary.offsetHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.element.animate({height:[i,n]},t),this.animation.onfinish=()=>this.onAnimationFinish(!1),this.animation.oncancel=()=>this.isClosing=!1}open(){this.element.style.height=`${this.element.offsetHeight}px`,this.element.open=!0,requestAnimationFrame((()=>this.expand()))}expand(){this.isExpanding=!0;const i=`${this.element.offsetHeight}px`,n=`${this.summary.offsetHeight+this.content.offsetHeight}px`;this.animation&&this.animation.cancel(),this.animation=this.element.animate({height:[i,n]},t),this.animation.onfinish=()=>this.onAnimationFinish(!0),this.animation.oncancel=()=>this.isExpanding=!1}onAnimationFinish(i){this.element.open=i,this.animation=null,this.isClosing=!1,this.isExpanding=!1,this.element.style.height=this.element.style.overflow=""}}